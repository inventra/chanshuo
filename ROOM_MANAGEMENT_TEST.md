# 📋 房間管理功能測試指南

## 🎯 **功能概述**

房間管理功能允許您：
- ✅ 查看所有蟬說露營區的房間類型
- ✅ 編輯房間名稱和房間總數
- ✅ 新增房間類型
- ✅ 刪除房間類型
- ✅ 按蟬說露營區篩選房間

---

## 🚀 **啟動測試環境**

### **1. 啟動後端服務**
```bash
cd backend
python app/main.py
```
**確認**: 後端API運行在 http://localhost:8000

### **2. 啟動前端服務**
```bash
cd front-end/hotel-dashboard
npm start
```
**確認**: 前端服務運行在 http://localhost:3000

---

## 🔍 **功能測試步驟**

### **步驟1: 訪問房間管理頁面**
1. 打開瀏覽器訪問 http://localhost:3000
2. 在左側導航菜單中點擊 **"房間管理"**
3. **預期結果**: 
   - 頁面標題顯示 "房間管理"
   - 顯示房間類型列表表格
   - 顯示篩選區域和新增按鈕

### **步驟2: 查看房間列表**
1. 確認表格顯示以下欄位：
   - 房型代碼（藍色標籤）
   - 房間名稱
   - 房間總數
   - 所屬蟬說露營區（綠色標籤）
   - 最後更新時間
   - 操作按鈕（編輯、刪除）
2. **預期結果**: 
   - 所有房間數據正確顯示
   - 蟬說露營區名稱正確映射（如：霧繞、霧語等）

### **步驟3: 測試篩選功能**
1. 點擊篩選區域的 "選擇蟬說露營區" 下拉菜單
2. 選擇一個特定的蟬說露營區（如：霧繞）
3. **預期結果**: 
   - 表格只顯示該蟬說露營區的房間
   - 篩選器正確工作
4. 點擊清除按鈕恢復顯示所有房間

### **步驟4: 測試編輯功能**
1. 找到一個房間記錄，點擊 **"編輯"** 按鈕
2. **預期結果**: 
   - 房間名稱和總數變為可編輯狀態
   - 出現 "保存" 和 "取消" 按鈕
   - 其他記錄的編輯按鈕被禁用
3. 修改房間名稱（如：改為 "測試豪華房"）
4. 修改房間總數（如：改為 15）
5. 點擊 **"保存"** 按鈕
6. **預期結果**: 
   - 顯示 "房間信息更新成功" 消息
   - 表格顯示更新後的數據
   - 編輯狀態退出

### **步驟5: 測試取消編輯**
1. 點擊另一個房間的 **"編輯"** 按鈕
2. 修改一些內容但不保存
3. 點擊 **"取消"** 按鈕
4. **預期結果**: 
   - 編輯狀態退出
   - 數據恢復到原始狀態
   - 沒有保存任何更改

### **步驟6: 測試新增房間功能**
1. 點擊右上角的 **"新增房間類型"** 按鈕
2. **預期結果**: 彈出新增房間Modal對話框
3. 填寫表單：
   - **蟬說露營區**: 選擇 "霧繞"
   - **房型代碼**: 輸入 "TEST"
   - **房間名稱**: 輸入 "測試房型"
   - **房間總數**: 輸入 5
4. 點擊 **"創建"** 按鈕
5. **預期結果**: 
   - 顯示 "新房間類型創建成功" 消息
   - Modal關閉
   - 表格中出現新建的房間記錄

### **步驟7: 測試新增驗證**
1. 再次點擊 **"新增房間類型"** 按鈕
2. 嘗試創建重複的房型代碼：
   - **蟬說露營區**: 選擇 "霧繞"
   - **房型代碼**: 輸入 "TEST"（與上一步相同）
   - **房間名稱**: 輸入 "另一個測試房型"
   - **房間總數**: 輸入 3
3. 點擊 **"創建"** 按鈕
4. **預期結果**: 
   - 顯示錯誤消息："該蟬說露營區已存在相同的房型代碼"
   - 創建失敗

### **步驟8: 測試刪除功能**
1. 找到剛才創建的測試房間（TEST）
2. 點擊 **"刪除"** 按鈕
3. **預期結果**: 彈出確認對話框
4. 點擊 **"確定"**
5. **預期結果**: 
   - 顯示 "房間類型刪除成功" 消息
   - 該房間從表格中消失

### **步驟9: 測試刪除約束**
1. 嘗試刪除一個有庫存數據的房間
2. 點擊其 **"刪除"** 按鈕並確認
3. **預期結果**: 
   - 顯示錯誤消息，說明無法刪除有相關數據的房間
   - 刪除操作被阻止

---

## 🌐 **API端點測試**

### **使用瀏覽器或Postman測試**

#### **1. 獲取房間列表**
```http
GET http://localhost:8000/room-types
```
**預期響應**: 返回所有房間類型的JSON數組

#### **2. 創建房間類型**
```http
POST http://localhost:8000/room-types
Content-Type: application/json

{
  "inv_type_code": "API_TEST",
  "name": "API測試房型",
  "total_rooms": 10,
  "hotel_id": "2436"
}
```
**預期響應**: 返回創建的房間數據

#### **3. 更新房間類型**
```http
PUT http://localhost:8000/room-types/{room_id}
Content-Type: application/json

{
  "name": "更新後的房間名稱",
  "total_rooms": 12
}
```
**預期響應**: 返回更新後的房間數據

#### **4. 刪除房間類型**
```http
DELETE http://localhost:8000/room-types/{room_id}
```
**預期響應**: 返回成功消息

---

## 📱 **響應式設計測試**

### **桌面端測試（>1200px）**
- 表格顯示完整
- 操作按鈕排列正常
- Modal對話框居中顯示

### **平板端測試（768px-1200px）**
- 表格可橫向滾動
- 所有功能按鈕可見
- 篩選區域排列適當

### **手機端測試（<768px）**
- 表格自動橫向滾動
- 操作按鈕縮小但仍可點擊
- Modal適應屏幕寬度

---

## ⚠️ **已知限制和注意事項**

### **業務規則**
1. **房型代碼唯一性**: 每個蟬說露營區內的房型代碼必須唯一
2. **數據完整性**: 有庫存或統計數據的房間不能直接刪除
3. **房間總數**: 必須大於0

### **技術限制**
1. **編輯模式**: 同時只能編輯一個房間
2. **權限控制**: 目前無用戶權限驗證
3. **批量操作**: 暫不支持批量編輯或刪除

---

## 🐛 **故障排除**

### **常見問題**

#### **問題1: 頁面載入失敗**
**解決方案**: 
- 確認後端API服務正在運行
- 檢查瀏覽器控制台錯誤
- 驗證API地址配置

#### **問題2: 編輯保存失敗**
**解決方案**: 
- 檢查輸入數據格式
- 確認房間總數為正整數
- 查看網路請求響應

#### **問題3: 新增房間失敗**
**解決方案**: 
- 確認房型代碼格式（大寫字母和數字）
- 檢查是否有重複的房型代碼
- 驗證所有必填欄位

#### **問題4: 刪除失敗**
**解決方案**: 
- 檢查該房型是否有關聯的庫存數據
- 如需強制刪除，先清理相關數據
- 查看後端錯誤日誌

---

## ✅ **測試完成清單**

- [ ] 頁面正常載入
- [ ] 房間列表顯示正確
- [ ] 篩選功能正常
- [ ] 編輯功能正常
- [ ] 取消編輯正常
- [ ] 新增房間成功
- [ ] 新增驗證正常
- [ ] 刪除功能正常
- [ ] 刪除約束生效
- [ ] API端點正常
- [ ] 響應式設計正常
- [ ] 錯誤處理正確

---

## 🎊 **測試總結**

完成所有測試項目後，房間管理功能應該：

✅ **功能完整**: 支持完整的CRUD操作  
✅ **數據安全**: 有適當的驗證和約束  
✅ **用戶體驗**: 操作流暢，反饋及時  
✅ **響應式**: 在各種設備上正常工作  
✅ **錯誤處理**: 提供清晰的錯誤信息  

**🌟 恭喜！房間管理功能測試完成！**
