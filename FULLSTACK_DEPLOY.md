# ğŸš€ å…¨æ£§Dockeréƒ¨ç½²æŒ‡å— - èŸ¬èªªéœ²ç‡Ÿå€ç®¡ç†ç³»çµ±

## ğŸ¯ **éƒ¨ç½²æ¦‚è¿°**

é€™å€‹æŒ‡å—å°‡å¹«åŠ©æ‚¨å°‡**å‰ç«¯Reactæ‡‰ç”¨**å’Œ**å¾Œç«¯FastAPIæœå‹™**æ‰“åŒ…æˆ**å–®ä¸€Dockerå®¹å™¨**ï¼Œä¸¦åœ¨Zeaburä¸ŠæˆåŠŸéƒ¨ç½²ã€‚

---

## ğŸ—ï¸ **æ¶æ§‹èªªæ˜**

### **å®¹å™¨å…§éƒ¨çµæ§‹**
```
ğŸ³ Dockerå®¹å™¨
â”œâ”€â”€ ğŸŒ Nginx (ç«¯å£80) - å‰ç«¯æœå‹™å™¨ + APIä»£ç†
â”‚   â”œâ”€â”€ ğŸ“± Reactéœæ…‹æ–‡ä»¶ (/var/www/html)
â”‚   â””â”€â”€ ğŸ”„ APIä»£ç† (/api/* â†’ 127.0.0.1:8000)
â”œâ”€â”€ ğŸ Python FastAPI (ç«¯å£8000) - å¾Œç«¯API
â””â”€â”€ ğŸ‘® Supervisor - é€²ç¨‹ç®¡ç†
```

### **è«‹æ±‚æµç¨‹**
```
ç”¨æˆ¶è«‹æ±‚ â†’ Nginx(80) â†’ 
â”œâ”€â”€ éœæ…‹æ–‡ä»¶ (/, /dashboard, /sales-status)
â””â”€â”€ APIè«‹æ±‚ (/api/*) â†’ Python FastAPI(8000)
```

---

## ğŸ“‹ **éƒ¨ç½²å‰æº–å‚™**

### **1. æ–‡ä»¶æª¢æŸ¥æ¸…å–®**
ç¢ºä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
- âœ… `Dockerfile.zeabur` - Zeaburå°ˆç”¨Dockerfile
- âœ… `nginx.zeabur.conf` - Nginxé…ç½®
- âœ… `supervisord.conf` - é€²ç¨‹ç®¡ç†é…ç½®
- âœ… `front-end/hotel-dashboard/` - å‰ç«¯ä»£ç¢¼
- âœ… `backend/` - å¾Œç«¯ä»£ç¢¼
- âœ… `env.fullstack.template` - ç’°å¢ƒè®Šé‡æ¨¡æ¿

### **2. ç’°å¢ƒè®Šé‡æº–å‚™**
è¤‡è£½ç’°å¢ƒè®Šé‡æ¨¡æ¿ä¸¦å¡«å…¥å¯¦éš›å€¼ï¼š
```bash
cp env.fullstack.template .env.zeabur
# ç·¨è¼¯.env.zeaburæ–‡ä»¶ï¼Œå¡«å…¥çœŸå¯¦çš„APIèªè­‰ä¿¡æ¯
```

---

## ğŸ› ï¸ **æœ¬åœ°æ§‹å»ºæ¸¬è©¦**

### **æ–¹æ³•1: ä½¿ç”¨æ§‹å»ºè…³æœ¬ï¼ˆæ¨è–¦ï¼‰**
```bash
# è³¦äºˆåŸ·è¡Œæ¬Šé™
chmod +x build-fullstack.sh

# æ§‹å»ºæ˜ åƒ
./build-fullstack.sh chanshuo-fullstack latest

# æœ¬åœ°æ¸¬è©¦
docker run -p 3000:80 --env-file env.fullstack.template chanshuo-fullstack:latest
```

### **æ–¹æ³•2: æ‰‹å‹•æ§‹å»º**
```bash
# æ§‹å»ºDockeræ˜ åƒ
docker build -f Dockerfile.zeabur -t chanshuo-fullstack .

# æœ¬åœ°é‹è¡Œæ¸¬è©¦
docker run -p 3000:80 \
  -e DATABASE_URL="your_database_url" \
  -e API_USERNAME="your_username" \
  -e API_PASSWORD="your_password" \
  chanshuo-fullstack
```

### **æ¸¬è©¦é©—è­‰**
```bash
# æª¢æŸ¥å¥åº·ç‹€æ…‹
curl http://localhost:3000/health

# è¨ªå•å‰ç«¯
open http://localhost:3000

# æª¢æŸ¥APIæ–‡æª”
open http://localhost:3000/docs
```

---

## â˜ï¸ **Zeaburéƒ¨ç½²**

### **æ­¥é©Ÿ1: æ¨é€ä»£ç¢¼åˆ°GitHub**
```bash
# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤è®Šæ›´
git commit -m "Add fullstack Docker configuration for Zeabur"

# æ¨é€åˆ°GitHub
git push origin main
```

### **æ­¥é©Ÿ2: åœ¨Zeaburä¸­å‰µå»ºé …ç›®**
1. ç™»éŒ„ [Zeaburæ§åˆ¶å°](https://zeabur.com)
2. é»æ“Š "New Project"
3. é¸æ“‡ "Deploy from GitHub"
4. é¸æ“‡æ‚¨çš„å€‰åº«

### **æ­¥é©Ÿ3: é…ç½®éƒ¨ç½²è¨­ç½®**
åœ¨Zeaburé …ç›®è¨­ç½®ä¸­ï¼š

**Dockerfileè¨­ç½®:**
- **Dockerfileè·¯å¾‘**: `Dockerfile.zeabur`
- **æ§‹å»ºä¸Šä¸‹æ–‡**: `/` (æ ¹ç›®éŒ„)

**ç«¯å£è¨­ç½®:**
- Zeaburæœƒè‡ªå‹•æª¢æ¸¬ä¸¦åˆ†é…ç«¯å£
- å®¹å™¨å…§éƒ¨ä½¿ç”¨ç«¯å£80

### **æ­¥é©Ÿ4: é…ç½®ç’°å¢ƒè®Šé‡**
åœ¨Zeaburç’°å¢ƒè®Šé‡é é¢æ·»åŠ ï¼š

**å¿…å¡«è®Šé‡:**
```bash
DATABASE_URL=postgresql://user:password@host:port/database
API_HOTEL_CODE=2436
API_USERNAME=your_api_username
API_PASSWORD=your_api_password
```

**å¯é¸è®Šé‡:**
```bash
DEBUG=false
LOG_LEVEL=INFO
CORS_ORIGINS=https://your-domain.zeabur.app
TZ=Asia/Taipei
```

### **æ­¥é©Ÿ5: è³‡æ–™åº«é…ç½®**
**é¸é …1: ä½¿ç”¨Zeabur PostgreSQL**
1. åœ¨é …ç›®ä¸­æ·»åŠ PostgreSQLæœå‹™
2. è¤‡è£½é€£æ¥URLåˆ°`DATABASE_URL`ç’°å¢ƒè®Šé‡

**é¸é …2: ä½¿ç”¨å¤–éƒ¨è³‡æ–™åº«**
- PlanetScale
- Supabase
- AWS RDS
- Google Cloud SQL

---

## ğŸ” **éƒ¨ç½²é©—è­‰**

### **å¥åº·æª¢æŸ¥**
éƒ¨ç½²å®Œæˆå¾Œï¼Œè¨ªå•ï¼š
```
https://your-app.zeabur.app/health
```
æ‡‰è©²è¿”å›ï¼š
```json
{
  "status": "healthy",
  "database": "connected"
}
```

### **åŠŸèƒ½æ¸¬è©¦**
1. **å‰ç«¯ç•Œé¢**: `https://your-app.zeabur.app`
2. **APIæ–‡æª”**: `https://your-app.zeabur.app/docs`
3. **ç¸½è¦½é é¢**: `https://your-app.zeabur.app/`
4. **éŠ·å”®ç‹€æ³**: `https://your-app.zeabur.app/sales-status`

---

## ğŸ› **å¸¸è¦‹å•é¡Œæ’é™¤**

### **1. æ§‹å»ºå¤±æ•—**
```bash
# éŒ¯èª¤: å‰ç«¯æ§‹å»ºå¤±æ•—
åŸå› : Node.jsç‰ˆæœ¬æˆ–ä¾è³´å•é¡Œ
è§£æ±º: æª¢æŸ¥front-end/hotel-dashboard/package.json

# éŒ¯èª¤: Pythonä¾è³´å®‰è£å¤±æ•—
åŸå› : requirements.txtå•é¡Œ
è§£æ±º: æª¢æŸ¥backend/requirements.txt
```

### **2. å•Ÿå‹•å¤±æ•—**
```bash
# éŒ¯èª¤: Nginxç„¡æ³•å•Ÿå‹•
åŸå› : é…ç½®æ–‡ä»¶éŒ¯èª¤
è§£æ±º: æª¢æŸ¥nginx.zeabur.confèªæ³•

# éŒ¯èª¤: Python APIç„¡æ³•å•Ÿå‹•
åŸå› : ç’°å¢ƒè®Šé‡æˆ–è³‡æ–™åº«é€£æ¥å•é¡Œ
è§£æ±º: æª¢æŸ¥DATABASE_URLæ˜¯å¦æ­£ç¢º
```

### **3. APIç„¡æ³•è¨ªå•**
```bash
# éŒ¯èª¤: /api/* 404éŒ¯èª¤
åŸå› : Nginxä»£ç†é…ç½®å•é¡Œ
è§£æ±º: æª¢æŸ¥nginx.zeabur.confä¸­çš„proxy_passè¨­ç½®

# éŒ¯èª¤: CORSéŒ¯èª¤
åŸå› : è·¨åŸŸé…ç½®å•é¡Œ  
è§£æ±º: è¨­ç½®æ­£ç¢ºçš„CORS_ORIGINSç’°å¢ƒè®Šé‡
```

### **4. è³‡æ–™åº«é€£æ¥å¤±æ•—**
```bash
# éŒ¯èª¤: ç„¡æ³•é€£æ¥åˆ°è³‡æ–™åº«
åŸå› : DATABASE_URLéŒ¯èª¤æˆ–ç¶²è·¯å•é¡Œ
è§£æ±º: 
1. æª¢æŸ¥DATABASE_URLæ ¼å¼
2. ç¢ºèªè³‡æ–™åº«æœå‹™æ­£åœ¨é‹è¡Œ
3. æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
```

---

## ğŸ“Š **æ€§èƒ½å„ªåŒ–**

### **æ˜ åƒå¤§å°å„ªåŒ–**
- ä½¿ç”¨å¤šéšæ®µæ§‹å»º
- æ¸…ç†ä¸å¿…è¦çš„æ–‡ä»¶
- ä½¿ç”¨alpineåŸºç¤æ˜ åƒ

### **é‹è¡Œæ™‚å„ªåŒ–**
```bash
# Nginxè¨­ç½®
- å•Ÿç”¨Gzipå£“ç¸®
- è¨­ç½®é©ç•¶çš„ç·©å­˜ç­–ç•¥
- å„ªåŒ–éœæ…‹è³‡æºè™•ç†

# Pythonè¨­ç½®  
- ä½¿ç”¨å–®ä¸€workeré€²ç¨‹
- è¨­ç½®é©ç•¶çš„è¶…æ™‚æ™‚é–“
- å•Ÿç”¨é©ç•¶çš„æ—¥èªŒç´šåˆ¥
```

---

## ğŸ“ˆ **ç›£æ§å’Œç¶­è­·**

### **æ—¥èªŒæŸ¥çœ‹**
åœ¨Zeaburæ§åˆ¶å°ä¸­æŸ¥çœ‹ï¼š
- æ‡‰ç”¨å•Ÿå‹•æ—¥èªŒ
- éŒ¯èª¤æ—¥èªŒ
- è¨ªå•æ—¥èªŒ

### **æ€§èƒ½ç›£æ§**
- CPUä½¿ç”¨ç‡
- å…§å­˜ä½¿ç”¨ç‡
- éŸ¿æ‡‰æ™‚é–“
- éŒ¯èª¤ç‡

### **å®šæœŸç¶­è­·**
- å®šæœŸæ›´æ–°ä¾è³´åŒ…
- ç›£æ§è³‡æ–™åº«æ€§èƒ½
- å‚™ä»½é‡è¦æ•¸æ“š

---

## ğŸ¯ **éƒ¨ç½²æª¢æŸ¥æ¸…å–®**

### **éƒ¨ç½²å‰**
- [ ] æœ¬åœ°æ§‹å»ºæ¸¬è©¦é€šé
- [ ] ç’°å¢ƒè®Šé‡é…ç½®å®Œæ•´
- [ ] è³‡æ–™åº«é€£æ¥æ¸¬è©¦æˆåŠŸ
- [ ] APIåŠŸèƒ½æ¸¬è©¦é€šé

### **éƒ¨ç½²å¾Œ**
- [ ] å¥åº·æª¢æŸ¥ç«¯é»æ­£å¸¸
- [ ] å‰ç«¯é é¢è¼‰å…¥æ­£å¸¸
- [ ] APIèª¿ç”¨åŠŸèƒ½æ­£å¸¸
- [ ] è³‡æ–™åº«é€£æ¥ç©©å®š
- [ ] ç›£æ§å’Œæ—¥èªŒé…ç½®å®Œæˆ

---

## ğŸ‰ **æˆåŠŸéƒ¨ç½²æ¨™æº–**

âœ… **å‰ç«¯**: Reactæ‡‰ç”¨è¼‰å…¥å¿«é€Ÿï¼ŒéŸ¿æ‡‰å¼è¨­è¨ˆæ­£å¸¸  
âœ… **å¾Œç«¯**: APIéŸ¿æ‡‰æ™‚é–“< 2ç§’ï¼ŒéŒ¯èª¤ç‡< 1%  
âœ… **è³‡æ–™åº«**: é€£æ¥ç©©å®šï¼ŒæŸ¥è©¢æ€§èƒ½è‰¯å¥½  
âœ… **æ•´é«”**: 7Ã—24å°æ™‚ç©©å®šé‹è¡Œï¼Œç”¨æˆ¶é«”é©—æµæš¢  

---

**ğŸŒŸ æ­å–œï¼æ‚¨çš„èŸ¬èªªéœ²ç‡Ÿå€ç®¡ç†ç³»çµ±ç¾å·²æˆåŠŸéƒ¨ç½²åœ¨é›²ç«¯ï¼**

å¦‚æœ‰å•é¡Œï¼Œè«‹åƒè€ƒä¸Šè¿°æ•…éšœæ’é™¤æŒ‡å—æˆ–è¯ç¹«æŠ€è¡“æ”¯æŒã€‚
