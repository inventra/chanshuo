# ğŸ”§ Zeaburéƒ¨ç½²ä¿®å¾©æŒ‡å— - èŸ¬èªªéœ²ç‡Ÿå€ç®¡ç†ç³»çµ±

## âŒ **å•é¡Œè¨ºæ–·**

æ ¹æ“šæ‚¨çš„æ—¥èªŒåˆ†æï¼š
```
WARN exited: api (exit status 3; not expected)
INFO gave up: api entered FATAL state, too many start retries too quickly
```

**å•é¡Œæ ¹æº**ï¼š
1. âŒ **APIæœå‹™ç„¡æ³•å•Ÿå‹•** (exit status 3)
2. âŒ **ç’°å¢ƒè®Šé‡æœªæ­£ç¢ºå‚³é**
3. âŒ **ç«¯å£é…ç½®éŒ¯èª¤** (åŸŸåæŒ‡å‘8000ç«¯å£)

---

## âœ… **è§£æ±ºæ–¹æ¡ˆ**

### **1. æ­£ç¢ºçš„Zeaburç’°å¢ƒè®Šé‡é…ç½®**

åœ¨Zeaburæ§åˆ¶å°çš„ç’°å¢ƒè®Šé‡é é¢è¨­ç½®ï¼š

#### **ğŸ”´ å¿…å¡«ç’°å¢ƒè®Šé‡**
```bash
DATABASE_URL=postgresql://username:password@hostname:port/database_name
API_HOTEL_CODE=2436
API_USERNAME=your_api_username
API_PASSWORD=your_api_password
```

#### **ğŸŸ¡ å¯é¸ç’°å¢ƒè®Šé‡**
```bash
DEBUG=false
LOG_LEVEL=INFO
CORS_ORIGINS=*
TZ=Asia/Taipei
```

#### **âš ï¸ é‡è¦æé†’**
- **DATABASE_URL**: å¿…é ˆæ˜¯æœ‰æ•ˆçš„PostgreSQLé€£æ¥å­—ç¬¦ä¸²
- **APIèªè­‰ä¿¡æ¯**: å¿…é ˆå¡«å…¥çœŸå¯¦çš„APIç”¨æˆ¶åå’Œå¯†ç¢¼
- **ä¸è¦è¨­ç½®PORT**: Zeaburæœƒè‡ªå‹•ç®¡ç†ç«¯å£

### **2. æ­£ç¢ºçš„åŸŸåé…ç½®**

#### **âŒ éŒ¯èª¤é…ç½®**
```
åŸŸåæŒ‡å‘8000ç«¯å£ â†’ 502éŒ¯èª¤
```

#### **âœ… æ­£ç¢ºé…ç½®**
```
åŸŸåæŒ‡å‘å®¹å™¨é»˜èªç«¯å£ï¼ˆZeaburè‡ªå‹•åˆ†é…ï¼‰
ä¸éœ€è¦æ‰‹å‹•æŒ‡å®šç«¯å£è™Ÿ
```

**ZeaburåŸŸåé…ç½®æ­¥é©Ÿ**ï¼š
1. åœ¨Zeaburé …ç›®ä¸­é»æ“Šã€ŒDomainsã€
2. æ·»åŠ è‡ªå®šç¾©åŸŸåæˆ–ä½¿ç”¨æä¾›çš„åŸŸå
3. **ä¸è¦**åœ¨åŸŸåå¾Œæ·»åŠ `:8000`
4. è®“Zeaburè‡ªå‹•è™•ç†ç«¯å£æ˜ å°„

### **3. è³‡æ–™åº«é…ç½®é¸é …**

#### **é¸é …A: ä½¿ç”¨Zeabur PostgreSQL**
1. åœ¨Zeaburé …ç›®ä¸­æ·»åŠ PostgreSQLæœå‹™
2. è¤‡è£½ç”Ÿæˆçš„DATABASE_URL
3. æ·»åŠ åˆ°ç’°å¢ƒè®Šé‡ä¸­

#### **é¸é …B: ä½¿ç”¨å¤–éƒ¨è³‡æ–™åº«**
```bash
# PlanetScale (æ¨è–¦)
DATABASE_URL=mysql://username:password@aws.connect.psdb.cloud/dbname?sslaccept=strict

# Supabase
DATABASE_URL=postgresql://postgres:password@db.supabase.co:5432/postgres

# Railway
DATABASE_URL=postgresql://postgres:password@roundhouse.proxy.rlwy.net:port/railway
```

---

## ğŸš€ **é‡æ–°éƒ¨ç½²æ­¥é©Ÿ**

### **æ­¥é©Ÿ1: æ›´æ–°ä»£ç¢¼**
```bash
# åœ¨æœ¬åœ°é …ç›®æ ¹ç›®éŒ„
git add .
git commit -m "Fix Zeabur deployment issues - API startup and port config"
git push origin main
```

### **æ­¥é©Ÿ2: é…ç½®Zeaburç’°å¢ƒè®Šé‡**
1. é€²å…¥Zeaburé …ç›®æ§åˆ¶å°
2. é»æ“Šã€ŒVariablesã€é ç±¤
3. æ·»åŠ ä¸Šè¿°å¿…å¡«ç’°å¢ƒè®Šé‡
4. **ç¢ºä¿DATABASE_URLæœ‰æ•ˆ**

### **æ­¥é©Ÿ3: é‡æ–°æ§‹å»º**
1. åœ¨Zeaburæ§åˆ¶å°é»æ“Šã€ŒRedeployã€
2. ç­‰å¾…æ§‹å»ºå®Œæˆ
3. æª¢æŸ¥éƒ¨ç½²æ—¥èªŒ

### **æ­¥é©Ÿ4: é©—è­‰éƒ¨ç½²**
```bash
# æª¢æŸ¥å¥åº·ç‹€æ…‹
curl https://your-domain.zeabur.app/health

# é æœŸéŸ¿æ‡‰
{"status": "healthy", "database": "connected"}
```

---

## ğŸ” **æ•…éšœæ’é™¤**

### **å•é¡Œ1: APIæœå‹™ä»ç„¶å¤±æ•—**
**æª¢æŸ¥é …ç›®**ï¼š
- [ ] DATABASE_URLæ ¼å¼æ­£ç¢º
- [ ] è³‡æ–™åº«æœå‹™å¯è¨ªå•
- [ ] APIèªè­‰ä¿¡æ¯æ­£ç¢º
- [ ] ç¶²è·¯é€£æ¥æ­£å¸¸

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```bash
# æ¸¬è©¦è³‡æ–™åº«é€£æ¥
psql "postgresql://username:password@hostname:port/database_name"
```

### **å•é¡Œ2: 502 Bad Gateway**
**å¯èƒ½åŸå› **ï¼š
- APIæœå‹™æœªå•Ÿå‹•
- Nginxé…ç½®å•é¡Œ
- ç«¯å£é…ç½®éŒ¯èª¤

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥Zeaburéƒ¨ç½²æ—¥èªŒ
2. ç¢ºèªAPIæœå‹™ç‹€æ…‹
3. é©—è­‰åŸŸåé…ç½®

### **å•é¡Œ3: ç’°å¢ƒè®Šé‡æœªç”Ÿæ•ˆ**
**æª¢æŸ¥é …ç›®**ï¼š
- [ ] è®Šé‡åç¨±æ­£ç¢º
- [ ] è®Šé‡å€¼æ ¼å¼æ­£ç¢º
- [ ] é‡æ–°éƒ¨ç½²å¾Œç”Ÿæ•ˆ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. é‡æ–°è¨­ç½®ç’°å¢ƒè®Šé‡
2. è§¸ç™¼é‡æ–°éƒ¨ç½²
3. æª¢æŸ¥å®¹å™¨æ—¥èªŒ

---

## ğŸ“Š **æˆåŠŸéƒ¨ç½²æª¢æŸ¥æ¸…å–®**

### **éƒ¨ç½²å‰æª¢æŸ¥**
- [ ] ä»£ç¢¼å·²æ¨é€åˆ°GitHub
- [ ] Dockerfile.zeaburå­˜åœ¨
- [ ] ç’°å¢ƒè®Šé‡å·²é…ç½®
- [ ] è³‡æ–™åº«é€£æ¥å·²æ¸¬è©¦

### **éƒ¨ç½²å¾Œæª¢æŸ¥**
- [ ] å®¹å™¨å•Ÿå‹•æˆåŠŸ
- [ ] Nginxæœå‹™é‹è¡Œ
- [ ] APIæœå‹™é‹è¡Œ
- [ ] å¥åº·æª¢æŸ¥é€šé
- [ ] å‰ç«¯é é¢è¼‰å…¥
- [ ] APIåŠŸèƒ½æ­£å¸¸

---

## ğŸ¯ **å¿«é€Ÿä¿®å¾©å‘½ä»¤**

### **æœ¬åœ°æ›´æ–°ä¸¦éƒ¨ç½²**
```bash
# 1. æ›´æ–°ä¿®å¾©å¾Œçš„é…ç½®
git add .
git commit -m "Fix Zeabur API startup issues"
git push origin main

# 2. åœ¨Zeaburæ§åˆ¶å°è¨­ç½®ç’°å¢ƒè®Šé‡ï¼š
# DATABASE_URL=postgresql://...
# API_HOTEL_CODE=2436
# API_USERNAME=your_username
# API_PASSWORD=your_password

# 3. åœ¨Zeaburæ§åˆ¶å°é»æ“Š "Redeploy"

# 4. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œç„¶å¾Œæ¸¬è©¦ï¼š
# curl https://your-domain.zeabur.app/health
```

---

## ğŸŒŸ **éƒ¨ç½²æˆåŠŸæ¨™æº–**

âœ… **å®¹å™¨å•Ÿå‹•**: æ‰€æœ‰æœå‹™æ­£å¸¸é‹è¡Œ  
âœ… **APIéŸ¿æ‡‰**: `/health`ç«¯é»è¿”å›æ­£å¸¸  
âœ… **å‰ç«¯è¼‰å…¥**: ç¶²ç«™å¯æ­£å¸¸è¨ªå•  
âœ… **åŠŸèƒ½å®Œæ•´**: æˆ¿é–“ç®¡ç†ç­‰åŠŸèƒ½æ­£å¸¸  
âœ… **æ€§èƒ½ç©©å®š**: éŸ¿æ‡‰æ™‚é–“< 3ç§’  

---

## ğŸ†˜ **å¦‚æœå•é¡Œä»ç„¶å­˜åœ¨**

1. **æª¢æŸ¥Zeaburæ—¥èªŒ**: æŸ¥çœ‹è©³ç´°éŒ¯èª¤ä¿¡æ¯
2. **é©—è­‰è³‡æ–™åº«**: ç¢ºèªè³‡æ–™åº«æœå‹™å¯è¨ªå•
3. **æ¸¬è©¦æœ¬åœ°**: ç¢ºä¿æœ¬åœ°ç’°å¢ƒæ­£å¸¸é‹è¡Œ
4. **è¯ç¹«æ”¯æŒ**: æä¾›å®Œæ•´çš„éŒ¯èª¤æ—¥èªŒ

---

**ğŸ‰ æŒ‰ç…§æ­¤æŒ‡å—æ“ä½œï¼Œæ‚¨çš„èŸ¬èªªéœ²ç‡Ÿå€ç®¡ç†ç³»çµ±å°‡åœ¨Zeaburä¸Šç©©å®šé‹è¡Œï¼**
